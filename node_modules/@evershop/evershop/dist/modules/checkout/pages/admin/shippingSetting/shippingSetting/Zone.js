import { Card } from '@components/admin/Card.js';
import { Modal } from '@components/common/modal/Modal.js';
import { useModal } from '@components/common/modal/useModal.js';
import { MapPinIcon } from '@heroicons/react/24/solid';
import axios from 'axios';
import React from 'react';
import { toast } from 'react-toastify';
import { Methods } from './Methods.js';
import { ZoneForm } from './ZoneForm.js';
function Zone({ zone, reload }) {
    var _a;
    const modal = useModal();
    return (React.createElement(Card.Session, { title: React.createElement("div", { className: "flex justify-between items-center gap-5" },
            React.createElement("div", null, zone.name),
            React.createElement("div", { className: "flex justify-between gap-5" },
                React.createElement("a", { href: "#", className: "text-interactive", onClick: (e) => {
                        e.preventDefault();
                        modal.open();
                    } }, "Edit Zone"),
                React.createElement("a", { className: "text-critical", href: "#", onClick: async (e) => {
                        e.preventDefault();
                        try {
                            const response = await axios.delete(zone.deleteApi);
                            if (response.status === 200) {
                                // Toast success
                                toast.success('Zone removed successfully');
                                // Delay for 2 seconds
                                setTimeout(() => {
                                    // Reload page
                                    window.location.reload();
                                }, 1500);
                            }
                            else {
                                // Toast error
                                toast.error('Failed to remove zone');
                            }
                        }
                        catch (error) {
                            // Toast error
                            toast.error('Failed to remove zone');
                        }
                    } }, "Remove Zone"))) },
        React.createElement("div", { className: "divide-y border rounded border-divider" },
            React.createElement("div", { className: "flex justify-start items-center border-divider mt-5" },
                React.createElement("div", { className: "p-5" },
                    React.createElement(MapPinIcon, { width: 25, height: 25, fill: "#008060" })),
                React.createElement("div", { className: "flex-grow px-2" },
                    React.createElement("div", null,
                        React.createElement("b", null, ((_a = zone.country) === null || _a === void 0 ? void 0 : _a.name) || 'Worldwide')),
                    React.createElement("div", null,
                        zone.provinces
                            .slice(0, 3)
                            .map((province) => province.name)
                            .join(', '),
                        zone.provinces.length > 3 && '...'))),
            React.createElement("div", { className: "flex justify-start items-center border-divider mt-5" },
                React.createElement("div", { className: "flex-grow px-2" },
                    React.createElement(Methods, { methods: zone.methods, reload: reload, addMethodApi: zone.addMethodApi })))),
        React.createElement(Modal, { title: `Edit Zone: ${zone.name}`, onClose: modal.close, isOpen: modal.isOpen },
            React.createElement(ZoneForm, { formMethod: "PATCH", saveZoneApi: zone.updateApi, onSuccess: () => modal.close(), reload: reload, zone: zone }))));
}
export { Zone };
//# sourceMappingURL=Zone.js.map