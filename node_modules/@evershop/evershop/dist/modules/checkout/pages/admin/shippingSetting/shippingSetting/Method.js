import { Modal } from '@components/common/modal/Modal.js';
import { useModal } from '@components/common/modal/useModal.js';
import { CogIcon } from '@heroicons/react/24/outline';
import React from 'react';
import { toast } from 'react-toastify';
import { MethodForm } from './MethodForm.js';
function Method({ method, reload }) {
    var _a;
    const modal = useModal();
    return (React.createElement(React.Fragment, null,
        React.createElement(React.Fragment, null,
            React.createElement("td", { className: "border-none py-2" }, method.name),
            React.createElement("td", { className: "border-none py-2" }, method.isEnabled ? 'Enabled' : 'Disabled'),
            React.createElement("td", { className: "border-none py-2" }, ((_a = method.cost) === null || _a === void 0 ? void 0 : _a.text) || (React.createElement("a", { href: "#", className: "text-interactive", onClick: (e) => {
                    e.preventDefault();
                    modal.open();
                } },
                React.createElement(CogIcon, { width: 22, height: 22 })))),
            React.createElement("td", { className: "border-none py-2" }, method.conditionType
                ? `${method.min || 0} <= ${method.conditionType} <= ${method.max || 'âˆž'}`
                : 'None'),
            React.createElement("td", { className: "border-none py-2" },
                React.createElement("a", { href: "#", className: "text-interactive", onClick: (e) => {
                        e.preventDefault();
                        modal.open();
                    } }, "Edit"),
                React.createElement("a", { href: "#", className: "text-critical ml-5", onClick: async (e) => {
                        e.preventDefault();
                        try {
                            const response = await fetch(method.deleteApi, {
                                method: 'DELETE',
                                headers: {
                                    'Content-Type': 'application/json'
                                },
                                credentials: 'include'
                            });
                            if (response.ok) {
                                reload();
                                // Toast success
                                toast.success('Method removed successfully');
                            }
                            else {
                                // Toast error
                                toast.error('Failed to remove method');
                            }
                        }
                        catch (error) {
                            // Toast error
                            toast.error('Failed to remove method');
                        }
                    } }, "Delete"))),
        React.createElement(Modal, { title: `Edit ${method.name} Method`, onClose: modal.close, isOpen: modal.isOpen },
            React.createElement(MethodForm, { saveMethodApi: method.updateApi, onSuccess: () => modal.close(), reload: reload, method: method }))));
}
export { Method };
//# sourceMappingURL=Method.js.map